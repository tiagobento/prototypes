"use strict";
(self["webpackChunk_kie_tools_bpmn_editor"] = self["webpackChunk_kie_tools_bpmn_editor"] || []).push([["node_modules_pnpm_storybook_blocks_7_6_13__types_react-dom_17_0_8__types_react_17_0_21_encodi-566015"],{

/***/ "../../node_modules/.pnpm/@storybook+blocks@7.6.13_@types+react-dom@17.0.8_@types+react@17.0.21_encoding@0.1.13_react-d_pivduf4g6bjixsei6qlzml6o3y/node_modules/@storybook/blocks/dist/Color-6VNJS4EI.mjs":
/*!****************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@storybook+blocks@7.6.13_@types+react-dom@17.0.8_@types+react@17.0.21_encoding@0.1.13_react-d_pivduf4g6bjixsei6qlzml6o3y/node_modules/@storybook/blocks/dist/Color-6VNJS4EI.mjs ***!
  \****************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ColorControl: () => (/* binding */ ColorControl),
/* harmony export */   "default": () => (/* binding */ Color_default)
/* harmony export */ });
/* harmony import */ var _chunk_GWAJ4KRU_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./chunk-GWAJ4KRU.mjs */ "../../node_modules/.pnpm/@storybook+blocks@7.6.13_@types+react-dom@17.0.8_@types+react@17.0.21_encoding@0.1.13_react-d_pivduf4g6bjixsei6qlzml6o3y/node_modules/@storybook/blocks/dist/chunk-GWAJ4KRU.mjs");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js");
/* harmony import */ var react_colorful__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-colorful */ "../../node_modules/.pnpm/react-colorful@5.6.1_react-dom@17.0.2_react@17.0.2__react@17.0.2/node_modules/react-colorful/dist/index.mjs");
/* harmony import */ var color_convert__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! color-convert */ "../../node_modules/.pnpm/color-convert@2.0.1/node_modules/color-convert/index.js");
/* harmony import */ var color_convert__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(color_convert__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var lodash_throttle_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash/throttle.js */ "../../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/throttle.js");
/* harmony import */ var lodash_throttle_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_throttle_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _storybook_theming__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @storybook/theming */ "../../node_modules/.pnpm/@storybook+theming@7.4.6_react-dom@17.0.2_react@17.0.2__react@17.0.2/node_modules/@storybook/theming/dist/index.mjs");
/* harmony import */ var _storybook_components__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @storybook/components */ "../../node_modules/.pnpm/@storybook+components@7.4.6_@types+react-dom@17.0.8_@types+react@17.0.21_react-dom@17.0.2_react@17.0.2__react@17.0.2/node_modules/@storybook/components/dist/index.mjs");








var Wrapper=_storybook_theming__WEBPACK_IMPORTED_MODULE_3__.styled.div({position:"relative",maxWidth:250}),PickerTooltip=(0,_storybook_theming__WEBPACK_IMPORTED_MODULE_3__.styled)(_storybook_components__WEBPACK_IMPORTED_MODULE_4__.WithTooltip)({position:"absolute",zIndex:1,top:4,left:4}),TooltipContent=_storybook_theming__WEBPACK_IMPORTED_MODULE_3__.styled.div({width:200,margin:5,".react-colorful__saturation":{borderRadius:"4px 4px 0 0"},".react-colorful__hue":{boxShadow:"inset 0 0 0 1px rgb(0 0 0 / 5%)"},".react-colorful__last-control":{borderRadius:"0 0 4px 4px"}}),Note=(0,_storybook_theming__WEBPACK_IMPORTED_MODULE_3__.styled)(_storybook_components__WEBPACK_IMPORTED_MODULE_4__.TooltipNote)(({theme})=>({fontFamily:theme.typography.fonts.base})),Swatches=_storybook_theming__WEBPACK_IMPORTED_MODULE_3__.styled.div({display:"grid",gridTemplateColumns:"repeat(9, 16px)",gap:6,padding:3,marginTop:5,width:200}),SwatchColor=_storybook_theming__WEBPACK_IMPORTED_MODULE_3__.styled.div(({theme,active})=>({width:16,height:16,boxShadow:active?`${theme.appBorderColor} 0 0 0 1px inset, ${theme.textMutedColor}50 0 0 0 4px`:`${theme.appBorderColor} 0 0 0 1px inset`,borderRadius:theme.appBorderRadius})),swatchBackground=`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,Swatch=({value,active,onClick,style,...props})=>{let backgroundImage=`linear-gradient(${value}, ${value}), ${swatchBackground}, linear-gradient(#fff, #fff)`;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(SwatchColor,{...props,active,onClick,style:{...style,backgroundImage}})},Input=(0,_storybook_theming__WEBPACK_IMPORTED_MODULE_3__.styled)(_storybook_components__WEBPACK_IMPORTED_MODULE_4__.Form.Input)(({theme})=>({width:"100%",paddingLeft:30,paddingRight:30,boxSizing:"border-box",fontFamily:theme.typography.fonts.base})),ToggleIcon=(0,_storybook_theming__WEBPACK_IMPORTED_MODULE_3__.styled)(_storybook_components__WEBPACK_IMPORTED_MODULE_4__.Icons)(({theme})=>({position:"absolute",zIndex:1,top:6,right:7,width:20,height:20,padding:4,boxSizing:"border-box",cursor:"pointer",color:theme.input.color})),ColorSpace=(ColorSpace2=>(ColorSpace2.RGB="rgb",ColorSpace2.HSL="hsl",ColorSpace2.HEX="hex",ColorSpace2))(ColorSpace||{}),COLOR_SPACES=Object.values(ColorSpace),COLOR_REGEXP=/\(([0-9]+),\s*([0-9]+)%?,\s*([0-9]+)%?,?\s*([0-9.]+)?\)/,RGB_REGEXP=/^\s*rgba?\(([0-9]+),\s*([0-9]+),\s*([0-9]+),?\s*([0-9.]+)?\)\s*$/i,HSL_REGEXP=/^\s*hsla?\(([0-9]+),\s*([0-9]+)%,\s*([0-9]+)%,?\s*([0-9.]+)?\)\s*$/i,HEX_REGEXP=/^\s*#?([0-9a-f]{3}|[0-9a-f]{6})\s*$/i,SHORTHEX_REGEXP=/^\s*#?([0-9a-f]{3})\s*$/i,ColorPicker={hex:react_colorful__WEBPACK_IMPORTED_MODULE_5__.HexColorPicker,rgb:react_colorful__WEBPACK_IMPORTED_MODULE_5__.RgbaStringColorPicker,hsl:react_colorful__WEBPACK_IMPORTED_MODULE_5__.HslaStringColorPicker},fallbackColor={hex:"transparent",rgb:"rgba(0, 0, 0, 0)",hsl:"hsla(0, 0%, 0%, 0)"},stringToArgs=value=>{let match=value?.match(COLOR_REGEXP);if(!match)return [0,0,0,1];let[,x,y,z,a=1]=match;return [x,y,z,a].map(Number)},parseValue=value=>{if(!value)return;let valid=!0;if(RGB_REGEXP.test(value)){let[r,g,b,a]=stringToArgs(value),[h,s,l]=color_convert__WEBPACK_IMPORTED_MODULE_1___default().rgb.hsl([r,g,b])||[0,0,0];return {valid,value,keyword:color_convert__WEBPACK_IMPORTED_MODULE_1___default().rgb.keyword([r,g,b]),colorSpace:"rgb",rgb:value,hsl:`hsla(${h}, ${s}%, ${l}%, ${a})`,hex:`#${color_convert__WEBPACK_IMPORTED_MODULE_1___default().rgb.hex([r,g,b]).toLowerCase()}`}}if(HSL_REGEXP.test(value)){let[h,s,l,a]=stringToArgs(value),[r,g,b]=color_convert__WEBPACK_IMPORTED_MODULE_1___default().hsl.rgb([h,s,l])||[0,0,0];return {valid,value,keyword:color_convert__WEBPACK_IMPORTED_MODULE_1___default().hsl.keyword([h,s,l]),colorSpace:"hsl",rgb:`rgba(${r}, ${g}, ${b}, ${a})`,hsl:value,hex:`#${color_convert__WEBPACK_IMPORTED_MODULE_1___default().hsl.hex([h,s,l]).toLowerCase()}`}}let plain=value.replace("#",""),rgb=color_convert__WEBPACK_IMPORTED_MODULE_1___default().keyword.rgb(plain)||color_convert__WEBPACK_IMPORTED_MODULE_1___default().hex.rgb(plain),hsl=color_convert__WEBPACK_IMPORTED_MODULE_1___default().rgb.hsl(rgb),mapped=value;if(/[^#a-f0-9]/i.test(value)?mapped=plain:HEX_REGEXP.test(value)&&(mapped=`#${plain}`),mapped.startsWith("#"))valid=HEX_REGEXP.test(mapped);else try{color_convert__WEBPACK_IMPORTED_MODULE_1___default().keyword.hex(mapped);}catch{valid=!1;}return {valid,value:mapped,keyword:color_convert__WEBPACK_IMPORTED_MODULE_1___default().rgb.keyword(rgb),colorSpace:"hex",rgb:`rgba(${rgb[0]}, ${rgb[1]}, ${rgb[2]}, 1)`,hsl:`hsla(${hsl[0]}, ${hsl[1]}%, ${hsl[2]}%, 1)`,hex:mapped}},getRealValue=(value,color,colorSpace)=>{if(!value||!color?.valid)return fallbackColor[colorSpace];if(colorSpace!=="hex")return color?.[colorSpace]||fallbackColor[colorSpace];if(!color.hex.startsWith("#"))try{return `#${color_convert__WEBPACK_IMPORTED_MODULE_1___default().keyword.hex(color.hex)}`}catch{return fallbackColor.hex}let short=color.hex.match(SHORTHEX_REGEXP);if(!short)return HEX_REGEXP.test(color.hex)?color.hex:fallbackColor.hex;let[r,g,b]=short[1].split("");return `#${r}${r}${g}${g}${b}${b}`},useColorInput=(initialValue,onChange)=>{let[value,setValue]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(initialValue||""),[color,setColor]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(()=>parseValue(value)),[colorSpace,setColorSpace]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(color?.colorSpace||"hex");(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{let nextValue=initialValue||"",nextColor=parseValue(nextValue);setValue(nextValue),setColor(nextColor),setColorSpace(nextColor?.colorSpace||"hex");},[initialValue]);let realValue=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>getRealValue(value,color,colorSpace).toLowerCase(),[value,color,colorSpace]),updateValue=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(update=>{let parsed=parseValue(update),v=parsed?.value||update||"";setValue(v),v===""&&(setColor(void 0),onChange(void 0)),parsed&&(setColor(parsed),setColorSpace(parsed.colorSpace),onChange(parsed.value));},[onChange]),cycleColorSpace=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{let next=COLOR_SPACES.indexOf(colorSpace)+1;next>=COLOR_SPACES.length&&(next=0),setColorSpace(COLOR_SPACES[next]);let update=color?.[COLOR_SPACES[next]]||"";setValue(update),onChange(update);},[color,colorSpace,onChange]);return {value,realValue,updateValue,color,colorSpace,cycleColorSpace}},id=value=>value.replace(/\s*/,"").toLowerCase(),usePresets=(presetColors,currentColor,colorSpace)=>{let[selectedColors,setSelectedColors]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(currentColor?.valid?[currentColor]:[]);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{currentColor===void 0&&setSelectedColors([]);},[currentColor]);let presets=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>(presetColors||[]).map(preset=>typeof preset=="string"?parseValue(preset):preset.title?{...parseValue(preset.color),keyword:preset.title}:parseValue(preset.color)).concat(selectedColors).filter(Boolean).slice(-27),[presetColors,selectedColors]),addPreset=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(color=>{color?.valid&&(presets.some(preset=>id(preset[colorSpace])===id(color[colorSpace]))||setSelectedColors(arr=>arr.concat(color)));},[colorSpace,presets]);return {presets,addPreset}},ColorControl=({name,value:initialValue,onChange,onFocus,onBlur,presetColors,startOpen=!1})=>{let throttledOnChange=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(lodash_throttle_js__WEBPACK_IMPORTED_MODULE_2___default()(onChange,200),[onChange]),{value,realValue,updateValue,color,colorSpace,cycleColorSpace}=useColorInput(initialValue,throttledOnChange),{presets,addPreset}=usePresets(presetColors,color,colorSpace),Picker=ColorPicker[colorSpace];return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Wrapper,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(PickerTooltip,{startOpen,closeOnOutsideClick:!0,onVisibleChange:()=>addPreset(color),tooltip:react__WEBPACK_IMPORTED_MODULE_0__.createElement(TooltipContent,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(Picker,{color:realValue==="transparent"?"#000000":realValue,onChange:updateValue,onFocus,onBlur}),presets.length>0&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(Swatches,null,presets.map((preset,index)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_storybook_components__WEBPACK_IMPORTED_MODULE_4__.WithTooltip,{key:`${preset.value}-${index}`,hasChrome:!1,tooltip:react__WEBPACK_IMPORTED_MODULE_0__.createElement(Note,{note:preset.keyword||preset.value})},react__WEBPACK_IMPORTED_MODULE_0__.createElement(Swatch,{value:preset[colorSpace],active:color&&id(preset[colorSpace])===id(color[colorSpace]),onClick:()=>updateValue(preset.value)})))))},react__WEBPACK_IMPORTED_MODULE_0__.createElement(Swatch,{value:realValue,style:{margin:4}})),react__WEBPACK_IMPORTED_MODULE_0__.createElement(Input,{id:(0,_chunk_GWAJ4KRU_mjs__WEBPACK_IMPORTED_MODULE_6__.getControlId)(name),value,onChange:e=>updateValue(e.target.value),onFocus:e=>e.target.select(),placeholder:"Choose color..."}),value?react__WEBPACK_IMPORTED_MODULE_0__.createElement(ToggleIcon,{icon:"markup",onClick:cycleColorSpace}):null)},Color_default=ColorControl;




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX3BucG1fc3Rvcnlib29rX2Jsb2Nrc183XzZfMTNfX3R5cGVzX3JlYWN0LWRvbV8xN18wXzhfX3R5cGVzX3JlYWN0XzE3XzBfMjFfZW5jb2RpLTU2NjAxNS4yYTI4YzkyYi5pZnJhbWUuYnVuZGxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW9EO0FBQ3FCO0FBQ3FCO0FBQzFEO0FBQ007QUFDRTtBQUNrQzs7QUFFOUUsWUFBWSxzREFBTSxNQUFNLGlDQUFpQyxnQkFBZ0IsMERBQU0sQ0FBQyw4REFBVyxHQUFHLDBDQUEwQyxpQkFBaUIsc0RBQU0sTUFBTSxrREFBa0QsMkJBQTJCLHlCQUF5Qiw0Q0FBNEMsa0NBQWtDLDRCQUE0QixPQUFPLDBEQUFNLENBQUMsOERBQVcsSUFBSSxNQUFNLEtBQUssdUNBQXVDLFlBQVksc0RBQU0sTUFBTSwyRkFBMkYsY0FBYyxzREFBTSxPQUFPLGFBQWEsS0FBSyx1Q0FBdUMsc0JBQXNCLG1CQUFtQixxQkFBcUIsaUJBQWlCLHNCQUFzQixvREFBb0QsNkNBQTZDLHFKQUFxSixvQ0FBb0MsSUFBSSx1Q0FBdUMsTUFBTSxJQUFJLE1BQU0sS0FBSyxpQkFBaUIsK0JBQStCLE9BQU8sZ0RBQW1CLGNBQWMsK0JBQStCLDBCQUEwQixFQUFFLE9BQU8sMERBQU0sQ0FBQyx1REFBSSxVQUFVLE1BQU0sS0FBSywwR0FBMEcsY0FBYywwREFBTSxDQUFDLHdEQUFLLElBQUksTUFBTSxLQUFLLHdJQUF3SSwySEFBMkgsNFNBQTRTLEVBQUUsVUFBVSxFQUFFLHlDQUF5QyxFQUFFLHFCQUFxQixJQUFJLDBEQUFjLEtBQUssaUVBQXFCLEtBQUssaUVBQXFCLENBQUMsZ0JBQWdCLGtFQUFrRSxzQkFBc0IscUNBQXFDLDJCQUEyQixzQkFBc0IsNkJBQTZCLG9CQUFvQixpQkFBaUIsYUFBYSwyQkFBMkIseUNBQXlDLHdEQUFXLHVCQUF1QixRQUFRLG9CQUFvQix3REFBVyx5REFBeUQsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxXQUFXLHdEQUFXLDRCQUE0QixHQUFHLDJCQUEyQix5Q0FBeUMsd0RBQVcsdUJBQXVCLFFBQVEsb0JBQW9CLHdEQUFXLCtDQUErQyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLHFCQUFxQix3REFBVyw0QkFBNEIsR0FBRyxvQ0FBb0MsNERBQWUsYUFBYSx3REFBVyxnQkFBZ0Isd0RBQVcsdUJBQXVCLDhFQUE4RSxNQUFNLHdEQUF3RCxTQUFTLDREQUFlLGNBQWMsTUFBTSxVQUFVLFFBQVEsMkJBQTJCLHdEQUFXLDJDQUEyQyxPQUFPLElBQUksT0FBTyxJQUFJLE9BQU8sa0JBQWtCLE9BQU8sSUFBSSxPQUFPLEtBQUssT0FBTyxtQkFBbUIseUNBQXlDLDBEQUEwRCw0RUFBNEUsa0NBQWtDLFdBQVcsNERBQWUsZ0JBQWdCLEVBQUUsTUFBTSx5QkFBeUIsMkNBQTJDLHdFQUF3RSw4QkFBOEIsV0FBVyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSx5Q0FBeUMsb0JBQW9CLCtDQUFRLG9DQUFvQywrQ0FBUSxtREFBbUQsK0NBQVEsMkJBQTJCLGdEQUFTLE1BQU0sK0RBQStELHFGQUFxRixpQkFBaUIsY0FBYyw4Q0FBTyw4RkFBOEYsa0RBQVcsVUFBVSwwREFBMEQsNElBQTRJLDZCQUE2QixrREFBVyxNQUFNLDRDQUE0QyxzRUFBc0UsMkNBQTJDLG1DQUFtQyw4QkFBOEIsUUFBUSw4REFBOEQscUdBQXFHLHNDQUFzQywrQ0FBUSx3Q0FBd0MsZ0RBQVMsTUFBTSw4Q0FBOEMsaUJBQWlCLFlBQVksOENBQU8sNkZBQTZGLGlEQUFpRCxzSEFBc0gsa0RBQVcsU0FBUyxpSUFBaUksdUJBQXVCLFFBQVEsbUJBQW1CLGdCQUFnQiwwRUFBMEUsSUFBSSxzQkFBc0Isa0RBQVcsQ0FBQyx5REFBUSw0QkFBNEIsNkRBQTZELGdEQUFnRCxrQkFBa0IsMEVBQTBFLE9BQU8sZ0RBQW1CLGNBQWMsZ0RBQW1CLGdCQUFnQiw4RUFBOEUsZ0RBQW1CLHFCQUFxQixnREFBbUIsU0FBUyx3RkFBd0Ysb0JBQW9CLGdEQUFtQiwyQ0FBMkMsZ0RBQW1CLENBQUMsOERBQVcsRUFBRSxPQUFPLGFBQWEsR0FBRyxNQUFNLHVCQUF1QixnREFBbUIsT0FBTyxrQ0FBa0MsRUFBRSxDQUFDLGdEQUFtQixTQUFTLDRIQUE0SCxNQUFNLENBQUMsZ0RBQW1CLFNBQVMsdUJBQXVCLFVBQVUsR0FBRyxnREFBbUIsUUFBUSxHQUFHLGlFQUFZLGdIQUFnSCxRQUFRLGdEQUFtQixhQUFhLHNDQUFzQyxRQUFROztBQUV2M04iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Aa2llLXRvb2xzL2JwbW4tZWRpdG9yLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3Rvcnlib29rK2Jsb2Nrc0A3LjYuMTNfQHR5cGVzK3JlYWN0LWRvbUAxNy4wLjhfQHR5cGVzK3JlYWN0QDE3LjAuMjFfZW5jb2RpbmdAMC4xLjEzX3JlYWN0LWRfcGl2ZHVmNGc2YmppeHNlaTZxbHptbDZvM3kvbm9kZV9tb2R1bGVzL0BzdG9yeWJvb2svYmxvY2tzL2Rpc3QvQ29sb3ItNlZOSlM0RUkubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldENvbnRyb2xJZCB9IGZyb20gJy4vY2h1bmstR1dBSjRLUlUubWpzJztcbmltcG9ydCBSZWFjdCwgeyB1c2VDYWxsYmFjaywgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEhleENvbG9yUGlja2VyLCBSZ2JhU3RyaW5nQ29sb3JQaWNrZXIsIEhzbGFTdHJpbmdDb2xvclBpY2tlciB9IGZyb20gJ3JlYWN0LWNvbG9yZnVsJztcbmltcG9ydCBjb252ZXJ0IGZyb20gJ2NvbG9yLWNvbnZlcnQnO1xuaW1wb3J0IHRocm90dGxlIGZyb20gJ2xvZGFzaC90aHJvdHRsZS5qcyc7XG5pbXBvcnQgeyBzdHlsZWQgfSBmcm9tICdAc3Rvcnlib29rL3RoZW1pbmcnO1xuaW1wb3J0IHsgV2l0aFRvb2x0aXAsIFRvb2x0aXBOb3RlLCBGb3JtLCBJY29ucyB9IGZyb20gJ0BzdG9yeWJvb2svY29tcG9uZW50cyc7XG5cbnZhciBXcmFwcGVyPXN0eWxlZC5kaXYoe3Bvc2l0aW9uOlwicmVsYXRpdmVcIixtYXhXaWR0aDoyNTB9KSxQaWNrZXJUb29sdGlwPXN0eWxlZChXaXRoVG9vbHRpcCkoe3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix6SW5kZXg6MSx0b3A6NCxsZWZ0OjR9KSxUb29sdGlwQ29udGVudD1zdHlsZWQuZGl2KHt3aWR0aDoyMDAsbWFyZ2luOjUsXCIucmVhY3QtY29sb3JmdWxfX3NhdHVyYXRpb25cIjp7Ym9yZGVyUmFkaXVzOlwiNHB4IDRweCAwIDBcIn0sXCIucmVhY3QtY29sb3JmdWxfX2h1ZVwiOntib3hTaGFkb3c6XCJpbnNldCAwIDAgMCAxcHggcmdiKDAgMCAwIC8gNSUpXCJ9LFwiLnJlYWN0LWNvbG9yZnVsX19sYXN0LWNvbnRyb2xcIjp7Ym9yZGVyUmFkaXVzOlwiMCAwIDRweCA0cHhcIn19KSxOb3RlPXN0eWxlZChUb29sdGlwTm90ZSkoKHt0aGVtZX0pPT4oe2ZvbnRGYW1pbHk6dGhlbWUudHlwb2dyYXBoeS5mb250cy5iYXNlfSkpLFN3YXRjaGVzPXN0eWxlZC5kaXYoe2Rpc3BsYXk6XCJncmlkXCIsZ3JpZFRlbXBsYXRlQ29sdW1uczpcInJlcGVhdCg5LCAxNnB4KVwiLGdhcDo2LHBhZGRpbmc6MyxtYXJnaW5Ub3A6NSx3aWR0aDoyMDB9KSxTd2F0Y2hDb2xvcj1zdHlsZWQuZGl2KCh7dGhlbWUsYWN0aXZlfSk9Pih7d2lkdGg6MTYsaGVpZ2h0OjE2LGJveFNoYWRvdzphY3RpdmU/YCR7dGhlbWUuYXBwQm9yZGVyQ29sb3J9IDAgMCAwIDFweCBpbnNldCwgJHt0aGVtZS50ZXh0TXV0ZWRDb2xvcn01MCAwIDAgMCA0cHhgOmAke3RoZW1lLmFwcEJvcmRlckNvbG9yfSAwIDAgMCAxcHggaW5zZXRgLGJvcmRlclJhZGl1czp0aGVtZS5hcHBCb3JkZXJSYWRpdXN9KSksc3dhdGNoQmFja2dyb3VuZD1gdXJsKCdkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCw8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjE2XCIgaGVpZ2h0PVwiMTZcIiBmaWxsLW9wYWNpdHk9XCIuMDVcIj48cGF0aCBkPVwiTTggMGg4djhIOHpNMCA4aDh2OEgwelwiLz48L3N2Zz4nKWAsU3dhdGNoPSh7dmFsdWUsYWN0aXZlLG9uQ2xpY2ssc3R5bGUsLi4ucHJvcHN9KT0+e2xldCBiYWNrZ3JvdW5kSW1hZ2U9YGxpbmVhci1ncmFkaWVudCgke3ZhbHVlfSwgJHt2YWx1ZX0pLCAke3N3YXRjaEJhY2tncm91bmR9LCBsaW5lYXItZ3JhZGllbnQoI2ZmZiwgI2ZmZilgO3JldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFN3YXRjaENvbG9yLHsuLi5wcm9wcyxhY3RpdmUsb25DbGljayxzdHlsZTp7Li4uc3R5bGUsYmFja2dyb3VuZEltYWdlfX0pfSxJbnB1dD1zdHlsZWQoRm9ybS5JbnB1dCkoKHt0aGVtZX0pPT4oe3dpZHRoOlwiMTAwJVwiLHBhZGRpbmdMZWZ0OjMwLHBhZGRpbmdSaWdodDozMCxib3hTaXppbmc6XCJib3JkZXItYm94XCIsZm9udEZhbWlseTp0aGVtZS50eXBvZ3JhcGh5LmZvbnRzLmJhc2V9KSksVG9nZ2xlSWNvbj1zdHlsZWQoSWNvbnMpKCh7dGhlbWV9KT0+KHtwb3NpdGlvbjpcImFic29sdXRlXCIsekluZGV4OjEsdG9wOjYscmlnaHQ6Nyx3aWR0aDoyMCxoZWlnaHQ6MjAscGFkZGluZzo0LGJveFNpemluZzpcImJvcmRlci1ib3hcIixjdXJzb3I6XCJwb2ludGVyXCIsY29sb3I6dGhlbWUuaW5wdXQuY29sb3J9KSksQ29sb3JTcGFjZT0oQ29sb3JTcGFjZTI9PihDb2xvclNwYWNlMi5SR0I9XCJyZ2JcIixDb2xvclNwYWNlMi5IU0w9XCJoc2xcIixDb2xvclNwYWNlMi5IRVg9XCJoZXhcIixDb2xvclNwYWNlMikpKENvbG9yU3BhY2V8fHt9KSxDT0xPUl9TUEFDRVM9T2JqZWN0LnZhbHVlcyhDb2xvclNwYWNlKSxDT0xPUl9SRUdFWFA9L1xcKChbMC05XSspLFxccyooWzAtOV0rKSU/LFxccyooWzAtOV0rKSU/LD9cXHMqKFswLTkuXSspP1xcKS8sUkdCX1JFR0VYUD0vXlxccypyZ2JhP1xcKChbMC05XSspLFxccyooWzAtOV0rKSxcXHMqKFswLTldKyksP1xccyooWzAtOS5dKyk/XFwpXFxzKiQvaSxIU0xfUkVHRVhQPS9eXFxzKmhzbGE/XFwoKFswLTldKyksXFxzKihbMC05XSspJSxcXHMqKFswLTldKyklLD9cXHMqKFswLTkuXSspP1xcKVxccyokL2ksSEVYX1JFR0VYUD0vXlxccyojPyhbMC05YS1mXXszfXxbMC05YS1mXXs2fSlcXHMqJC9pLFNIT1JUSEVYX1JFR0VYUD0vXlxccyojPyhbMC05YS1mXXszfSlcXHMqJC9pLENvbG9yUGlja2VyPXtoZXg6SGV4Q29sb3JQaWNrZXIscmdiOlJnYmFTdHJpbmdDb2xvclBpY2tlcixoc2w6SHNsYVN0cmluZ0NvbG9yUGlja2VyfSxmYWxsYmFja0NvbG9yPXtoZXg6XCJ0cmFuc3BhcmVudFwiLHJnYjpcInJnYmEoMCwgMCwgMCwgMClcIixoc2w6XCJoc2xhKDAsIDAlLCAwJSwgMClcIn0sc3RyaW5nVG9BcmdzPXZhbHVlPT57bGV0IG1hdGNoPXZhbHVlPy5tYXRjaChDT0xPUl9SRUdFWFApO2lmKCFtYXRjaClyZXR1cm4gWzAsMCwwLDFdO2xldFsseCx5LHosYT0xXT1tYXRjaDtyZXR1cm4gW3gseSx6LGFdLm1hcChOdW1iZXIpfSxwYXJzZVZhbHVlPXZhbHVlPT57aWYoIXZhbHVlKXJldHVybjtsZXQgdmFsaWQ9ITA7aWYoUkdCX1JFR0VYUC50ZXN0KHZhbHVlKSl7bGV0W3IsZyxiLGFdPXN0cmluZ1RvQXJncyh2YWx1ZSksW2gscyxsXT1jb252ZXJ0LnJnYi5oc2woW3IsZyxiXSl8fFswLDAsMF07cmV0dXJuIHt2YWxpZCx2YWx1ZSxrZXl3b3JkOmNvbnZlcnQucmdiLmtleXdvcmQoW3IsZyxiXSksY29sb3JTcGFjZTpcInJnYlwiLHJnYjp2YWx1ZSxoc2w6YGhzbGEoJHtofSwgJHtzfSUsICR7bH0lLCAke2F9KWAsaGV4OmAjJHtjb252ZXJ0LnJnYi5oZXgoW3IsZyxiXSkudG9Mb3dlckNhc2UoKX1gfX1pZihIU0xfUkVHRVhQLnRlc3QodmFsdWUpKXtsZXRbaCxzLGwsYV09c3RyaW5nVG9BcmdzKHZhbHVlKSxbcixnLGJdPWNvbnZlcnQuaHNsLnJnYihbaCxzLGxdKXx8WzAsMCwwXTtyZXR1cm4ge3ZhbGlkLHZhbHVlLGtleXdvcmQ6Y29udmVydC5oc2wua2V5d29yZChbaCxzLGxdKSxjb2xvclNwYWNlOlwiaHNsXCIscmdiOmByZ2JhKCR7cn0sICR7Z30sICR7Yn0sICR7YX0pYCxoc2w6dmFsdWUsaGV4OmAjJHtjb252ZXJ0LmhzbC5oZXgoW2gscyxsXSkudG9Mb3dlckNhc2UoKX1gfX1sZXQgcGxhaW49dmFsdWUucmVwbGFjZShcIiNcIixcIlwiKSxyZ2I9Y29udmVydC5rZXl3b3JkLnJnYihwbGFpbil8fGNvbnZlcnQuaGV4LnJnYihwbGFpbiksaHNsPWNvbnZlcnQucmdiLmhzbChyZ2IpLG1hcHBlZD12YWx1ZTtpZigvW14jYS1mMC05XS9pLnRlc3QodmFsdWUpP21hcHBlZD1wbGFpbjpIRVhfUkVHRVhQLnRlc3QodmFsdWUpJiYobWFwcGVkPWAjJHtwbGFpbn1gKSxtYXBwZWQuc3RhcnRzV2l0aChcIiNcIikpdmFsaWQ9SEVYX1JFR0VYUC50ZXN0KG1hcHBlZCk7ZWxzZSB0cnl7Y29udmVydC5rZXl3b3JkLmhleChtYXBwZWQpO31jYXRjaHt2YWxpZD0hMTt9cmV0dXJuIHt2YWxpZCx2YWx1ZTptYXBwZWQsa2V5d29yZDpjb252ZXJ0LnJnYi5rZXl3b3JkKHJnYiksY29sb3JTcGFjZTpcImhleFwiLHJnYjpgcmdiYSgke3JnYlswXX0sICR7cmdiWzFdfSwgJHtyZ2JbMl19LCAxKWAsaHNsOmBoc2xhKCR7aHNsWzBdfSwgJHtoc2xbMV19JSwgJHtoc2xbMl19JSwgMSlgLGhleDptYXBwZWR9fSxnZXRSZWFsVmFsdWU9KHZhbHVlLGNvbG9yLGNvbG9yU3BhY2UpPT57aWYoIXZhbHVlfHwhY29sb3I/LnZhbGlkKXJldHVybiBmYWxsYmFja0NvbG9yW2NvbG9yU3BhY2VdO2lmKGNvbG9yU3BhY2UhPT1cImhleFwiKXJldHVybiBjb2xvcj8uW2NvbG9yU3BhY2VdfHxmYWxsYmFja0NvbG9yW2NvbG9yU3BhY2VdO2lmKCFjb2xvci5oZXguc3RhcnRzV2l0aChcIiNcIikpdHJ5e3JldHVybiBgIyR7Y29udmVydC5rZXl3b3JkLmhleChjb2xvci5oZXgpfWB9Y2F0Y2h7cmV0dXJuIGZhbGxiYWNrQ29sb3IuaGV4fWxldCBzaG9ydD1jb2xvci5oZXgubWF0Y2goU0hPUlRIRVhfUkVHRVhQKTtpZighc2hvcnQpcmV0dXJuIEhFWF9SRUdFWFAudGVzdChjb2xvci5oZXgpP2NvbG9yLmhleDpmYWxsYmFja0NvbG9yLmhleDtsZXRbcixnLGJdPXNob3J0WzFdLnNwbGl0KFwiXCIpO3JldHVybiBgIyR7cn0ke3J9JHtnfSR7Z30ke2J9JHtifWB9LHVzZUNvbG9ySW5wdXQ9KGluaXRpYWxWYWx1ZSxvbkNoYW5nZSk9PntsZXRbdmFsdWUsc2V0VmFsdWVdPXVzZVN0YXRlKGluaXRpYWxWYWx1ZXx8XCJcIiksW2NvbG9yLHNldENvbG9yXT11c2VTdGF0ZSgoKT0+cGFyc2VWYWx1ZSh2YWx1ZSkpLFtjb2xvclNwYWNlLHNldENvbG9yU3BhY2VdPXVzZVN0YXRlKGNvbG9yPy5jb2xvclNwYWNlfHxcImhleFwiKTt1c2VFZmZlY3QoKCk9PntsZXQgbmV4dFZhbHVlPWluaXRpYWxWYWx1ZXx8XCJcIixuZXh0Q29sb3I9cGFyc2VWYWx1ZShuZXh0VmFsdWUpO3NldFZhbHVlKG5leHRWYWx1ZSksc2V0Q29sb3IobmV4dENvbG9yKSxzZXRDb2xvclNwYWNlKG5leHRDb2xvcj8uY29sb3JTcGFjZXx8XCJoZXhcIik7fSxbaW5pdGlhbFZhbHVlXSk7bGV0IHJlYWxWYWx1ZT11c2VNZW1vKCgpPT5nZXRSZWFsVmFsdWUodmFsdWUsY29sb3IsY29sb3JTcGFjZSkudG9Mb3dlckNhc2UoKSxbdmFsdWUsY29sb3IsY29sb3JTcGFjZV0pLHVwZGF0ZVZhbHVlPXVzZUNhbGxiYWNrKHVwZGF0ZT0+e2xldCBwYXJzZWQ9cGFyc2VWYWx1ZSh1cGRhdGUpLHY9cGFyc2VkPy52YWx1ZXx8dXBkYXRlfHxcIlwiO3NldFZhbHVlKHYpLHY9PT1cIlwiJiYoc2V0Q29sb3Iodm9pZCAwKSxvbkNoYW5nZSh2b2lkIDApKSxwYXJzZWQmJihzZXRDb2xvcihwYXJzZWQpLHNldENvbG9yU3BhY2UocGFyc2VkLmNvbG9yU3BhY2UpLG9uQ2hhbmdlKHBhcnNlZC52YWx1ZSkpO30sW29uQ2hhbmdlXSksY3ljbGVDb2xvclNwYWNlPXVzZUNhbGxiYWNrKCgpPT57bGV0IG5leHQ9Q09MT1JfU1BBQ0VTLmluZGV4T2YoY29sb3JTcGFjZSkrMTtuZXh0Pj1DT0xPUl9TUEFDRVMubGVuZ3RoJiYobmV4dD0wKSxzZXRDb2xvclNwYWNlKENPTE9SX1NQQUNFU1tuZXh0XSk7bGV0IHVwZGF0ZT1jb2xvcj8uW0NPTE9SX1NQQUNFU1tuZXh0XV18fFwiXCI7c2V0VmFsdWUodXBkYXRlKSxvbkNoYW5nZSh1cGRhdGUpO30sW2NvbG9yLGNvbG9yU3BhY2Usb25DaGFuZ2VdKTtyZXR1cm4ge3ZhbHVlLHJlYWxWYWx1ZSx1cGRhdGVWYWx1ZSxjb2xvcixjb2xvclNwYWNlLGN5Y2xlQ29sb3JTcGFjZX19LGlkPXZhbHVlPT52YWx1ZS5yZXBsYWNlKC9cXHMqLyxcIlwiKS50b0xvd2VyQ2FzZSgpLHVzZVByZXNldHM9KHByZXNldENvbG9ycyxjdXJyZW50Q29sb3IsY29sb3JTcGFjZSk9PntsZXRbc2VsZWN0ZWRDb2xvcnMsc2V0U2VsZWN0ZWRDb2xvcnNdPXVzZVN0YXRlKGN1cnJlbnRDb2xvcj8udmFsaWQ/W2N1cnJlbnRDb2xvcl06W10pO3VzZUVmZmVjdCgoKT0+e2N1cnJlbnRDb2xvcj09PXZvaWQgMCYmc2V0U2VsZWN0ZWRDb2xvcnMoW10pO30sW2N1cnJlbnRDb2xvcl0pO2xldCBwcmVzZXRzPXVzZU1lbW8oKCk9PihwcmVzZXRDb2xvcnN8fFtdKS5tYXAocHJlc2V0PT50eXBlb2YgcHJlc2V0PT1cInN0cmluZ1wiP3BhcnNlVmFsdWUocHJlc2V0KTpwcmVzZXQudGl0bGU/ey4uLnBhcnNlVmFsdWUocHJlc2V0LmNvbG9yKSxrZXl3b3JkOnByZXNldC50aXRsZX06cGFyc2VWYWx1ZShwcmVzZXQuY29sb3IpKS5jb25jYXQoc2VsZWN0ZWRDb2xvcnMpLmZpbHRlcihCb29sZWFuKS5zbGljZSgtMjcpLFtwcmVzZXRDb2xvcnMsc2VsZWN0ZWRDb2xvcnNdKSxhZGRQcmVzZXQ9dXNlQ2FsbGJhY2soY29sb3I9Pntjb2xvcj8udmFsaWQmJihwcmVzZXRzLnNvbWUocHJlc2V0PT5pZChwcmVzZXRbY29sb3JTcGFjZV0pPT09aWQoY29sb3JbY29sb3JTcGFjZV0pKXx8c2V0U2VsZWN0ZWRDb2xvcnMoYXJyPT5hcnIuY29uY2F0KGNvbG9yKSkpO30sW2NvbG9yU3BhY2UscHJlc2V0c10pO3JldHVybiB7cHJlc2V0cyxhZGRQcmVzZXR9fSxDb2xvckNvbnRyb2w9KHtuYW1lLHZhbHVlOmluaXRpYWxWYWx1ZSxvbkNoYW5nZSxvbkZvY3VzLG9uQmx1cixwcmVzZXRDb2xvcnMsc3RhcnRPcGVuPSExfSk9PntsZXQgdGhyb3R0bGVkT25DaGFuZ2U9dXNlQ2FsbGJhY2sodGhyb3R0bGUob25DaGFuZ2UsMjAwKSxbb25DaGFuZ2VdKSx7dmFsdWUscmVhbFZhbHVlLHVwZGF0ZVZhbHVlLGNvbG9yLGNvbG9yU3BhY2UsY3ljbGVDb2xvclNwYWNlfT11c2VDb2xvcklucHV0KGluaXRpYWxWYWx1ZSx0aHJvdHRsZWRPbkNoYW5nZSkse3ByZXNldHMsYWRkUHJlc2V0fT11c2VQcmVzZXRzKHByZXNldENvbG9ycyxjb2xvcixjb2xvclNwYWNlKSxQaWNrZXI9Q29sb3JQaWNrZXJbY29sb3JTcGFjZV07cmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoV3JhcHBlcixudWxsLFJlYWN0LmNyZWF0ZUVsZW1lbnQoUGlja2VyVG9vbHRpcCx7c3RhcnRPcGVuLGNsb3NlT25PdXRzaWRlQ2xpY2s6ITAsb25WaXNpYmxlQ2hhbmdlOigpPT5hZGRQcmVzZXQoY29sb3IpLHRvb2x0aXA6UmVhY3QuY3JlYXRlRWxlbWVudChUb29sdGlwQ29udGVudCxudWxsLFJlYWN0LmNyZWF0ZUVsZW1lbnQoUGlja2VyLHtjb2xvcjpyZWFsVmFsdWU9PT1cInRyYW5zcGFyZW50XCI/XCIjMDAwMDAwXCI6cmVhbFZhbHVlLG9uQ2hhbmdlOnVwZGF0ZVZhbHVlLG9uRm9jdXMsb25CbHVyfSkscHJlc2V0cy5sZW5ndGg+MCYmUmVhY3QuY3JlYXRlRWxlbWVudChTd2F0Y2hlcyxudWxsLHByZXNldHMubWFwKChwcmVzZXQsaW5kZXgpPT5SZWFjdC5jcmVhdGVFbGVtZW50KFdpdGhUb29sdGlwLHtrZXk6YCR7cHJlc2V0LnZhbHVlfS0ke2luZGV4fWAsaGFzQ2hyb21lOiExLHRvb2x0aXA6UmVhY3QuY3JlYXRlRWxlbWVudChOb3RlLHtub3RlOnByZXNldC5rZXl3b3JkfHxwcmVzZXQudmFsdWV9KX0sUmVhY3QuY3JlYXRlRWxlbWVudChTd2F0Y2gse3ZhbHVlOnByZXNldFtjb2xvclNwYWNlXSxhY3RpdmU6Y29sb3ImJmlkKHByZXNldFtjb2xvclNwYWNlXSk9PT1pZChjb2xvcltjb2xvclNwYWNlXSksb25DbGljazooKT0+dXBkYXRlVmFsdWUocHJlc2V0LnZhbHVlKX0pKSkpKX0sUmVhY3QuY3JlYXRlRWxlbWVudChTd2F0Y2gse3ZhbHVlOnJlYWxWYWx1ZSxzdHlsZTp7bWFyZ2luOjR9fSkpLFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXQse2lkOmdldENvbnRyb2xJZChuYW1lKSx2YWx1ZSxvbkNoYW5nZTplPT51cGRhdGVWYWx1ZShlLnRhcmdldC52YWx1ZSksb25Gb2N1czplPT5lLnRhcmdldC5zZWxlY3QoKSxwbGFjZWhvbGRlcjpcIkNob29zZSBjb2xvci4uLlwifSksdmFsdWU/UmVhY3QuY3JlYXRlRWxlbWVudChUb2dnbGVJY29uLHtpY29uOlwibWFya3VwXCIsb25DbGljazpjeWNsZUNvbG9yU3BhY2V9KTpudWxsKX0sQ29sb3JfZGVmYXVsdD1Db2xvckNvbnRyb2w7XG5cbmV4cG9ydCB7IENvbG9yQ29udHJvbCwgQ29sb3JfZGVmYXVsdCBhcyBkZWZhdWx0IH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=